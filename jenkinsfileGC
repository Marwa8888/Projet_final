pipeline {
    agent {
        any
    }

    environment {
        SVC_ACCOUNT_KEY = credentials('json')
    }
    tools {
        maven 'maven'
    }
    stages {
        
        stage('checkout') {
            steps {
                git branch: ''
			}
        }

     
        
        stage('tfinit') {
            steps {
                dir('GCP_test') {
                    sh 'terraform init'
                    sh 'terraform plan'
                }
            }
        }

        stage('tfapply') {
            steps {
                dir('GCP_test') {
                    sh 'terraform apply -auto-approve'
                }
            }
}
